import{s as te,n as Q,o as se,r as ae,i as W}from"../chunks/scheduler.a03335a9.js";import{S as re,i as oe,g as E,s as U,e as X,h as C,x as J,c as q,j as M,f as u,k,a as D,m as w,n as N,z as c,A as K,o as H}from"../chunks/index.ccd29840.js";import{e as Y,u as ie,d as ne}from"../chunks/each.f8bf1ced.js";import{s as z}from"../chunks/supabaseClient.dfd487c3.js";function Z(p,l,e){const r=p.slice();return r[8]=l[e],r}function $(p,l){let e,r,a,h,f=l[8].player_number+"",v,_,b,j=l[8].name+"",i,d,y,o;function t(){return l[6](l[8])}return{key:p,first:null,c(){e=E("button"),r=E("profile"),a=E("number"),h=w("#"),v=w(f),_=U(),b=E("name"),i=w(j),d=U(),this.h()},l(s){e=C(s,"BUTTON",{class:!0});var m=M(e);r=C(m,"PROFILE",{class:!0});var F=M(r);a=C(F,"NUMBER",{class:!0});var S=M(a);h=N(S,"#"),v=N(S,f),S.forEach(u),_=q(F),b=C(F,"NAME",{class:!0});var n=M(b);i=N(n,j),n.forEach(u),F.forEach(u),d=q(m),m.forEach(u),this.h()},h(){k(a,"class","svelte-1tljlcu"),k(b,"class","svelte-1tljlcu"),k(r,"class","svelte-1tljlcu"),k(e,"class","svelte-1tljlcu"),this.first=e},m(s,m){D(s,e,m),c(e,r),c(r,a),c(a,h),c(a,v),c(r,_),c(r,b),c(b,i),c(e,d),y||(o=[K(e,"click",t),K(e,"change",l[5])],y=!0)},p(s,m){l=s,m&1&&f!==(f=l[8].player_number+"")&&H(v,f),m&1&&j!==(j=l[8].name+"")&&H(i,j)},d(s){s&&u(e),y=!1,ae(o)}}}function x(p){let l,e,r,a,h,f=p[2].player_number+"",v,_,b,j,i=p[2].name+"",d,y,o,t,s=p[2].full_name+"",m,F,S,n,P="Close",L,O,g=p[3]&&ee(p),I=p[2].details&&le(p);return{c(){l=E("div"),e=E("div"),g&&g.c(),r=U(),a=E("p"),h=w("Number: "),v=w(f),_=U(),b=E("p"),j=w("Name: "),d=w(i),y=U(),o=E("p"),t=w("Full Name: "),m=w(s),F=U(),I&&I.c(),S=U(),n=E("button"),n.textContent=P,this.h()},l(R){l=C(R,"DIV",{class:!0});var B=M(l);e=C(B,"DIV",{class:!0});var T=M(e);g&&g.l(T),r=q(T),a=C(T,"P",{class:!0});var A=M(a);h=N(A,"Number: "),v=N(A,f),A.forEach(u),_=q(T),b=C(T,"P",{class:!0});var G=M(b);j=N(G,"Name: "),d=N(G,i),G.forEach(u),y=q(T),o=C(T,"P",{class:!0});var V=M(o);t=N(V,"Full Name: "),m=N(V,s),V.forEach(u),F=q(T),I&&I.l(T),S=q(T),n=C(T,"BUTTON",{class:!0,"data-svelte-h":!0}),J(n)!=="svelte-eho9pi"&&(n.textContent=P),T.forEach(u),B.forEach(u),this.h()},h(){k(a,"class","svelte-1tljlcu"),k(b,"class","svelte-1tljlcu"),k(o,"class","svelte-1tljlcu"),k(n,"class","svelte-1tljlcu"),k(e,"class","modal svelte-1tljlcu"),k(l,"class","modal-background svelte-1tljlcu")},m(R,B){D(R,l,B),c(l,e),g&&g.m(e,null),c(e,r),c(e,a),c(a,h),c(a,v),c(e,_),c(e,b),c(b,j),c(b,d),c(e,y),c(e,o),c(o,t),c(o,m),c(e,F),I&&I.m(e,null),c(e,S),c(e,n),L||(O=K(n,"click",p[7]),L=!0)},p(R,B){R[3]?g?g.p(R,B):(g=ee(R),g.c(),g.m(e,r)):g&&(g.d(1),g=null),B&4&&f!==(f=R[2].player_number+"")&&H(v,f),B&4&&i!==(i=R[2].name+"")&&H(d,i),B&4&&s!==(s=R[2].full_name+"")&&H(m,s),R[2].details?I?I.p(R,B):(I=le(R),I.c(),I.m(e,S)):I&&(I.d(1),I=null)},d(R){R&&u(l),g&&g.d(),I&&I.d(),L=!1,O()}}}function ee(p){let l,e,r;return{c(){l=E("img"),this.h()},l(a){l=C(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){W(l.src,e=p[3])||k(l,"src",e),k(l,"alt",r=p[2].name),k(l,"class","svelte-1tljlcu")},m(a,h){D(a,l,h)},p(a,h){h&8&&!W(l.src,e=a[3])&&k(l,"src",e),h&4&&r!==(r=a[2].name)&&k(l,"alt",r)},d(a){a&&u(l)}}}function le(p){let l,e,r=p[2].details.role+"",a,h,f,v,_=p[2].details.from_location+"",b,j,i,d,y=p[2].details.hobbies+"",o,t,s,m,F=p[2].details.story+"",S;return{c(){l=E("p"),e=w("Role: "),a=w(r),h=U(),f=E("p"),v=w("From: "),b=w(_),j=U(),i=E("p"),d=w("Hobbies: "),o=w(y),t=U(),s=E("p"),m=w("Story: "),S=w(F),this.h()},l(n){l=C(n,"P",{class:!0});var P=M(l);e=N(P,"Role: "),a=N(P,r),P.forEach(u),h=q(n),f=C(n,"P",{class:!0});var L=M(f);v=N(L,"From: "),b=N(L,_),L.forEach(u),j=q(n),i=C(n,"P",{class:!0});var O=M(i);d=N(O,"Hobbies: "),o=N(O,y),O.forEach(u),t=q(n),s=C(n,"P",{class:!0});var g=M(s);m=N(g,"Story: "),S=N(g,F),g.forEach(u),this.h()},h(){k(l,"class","svelte-1tljlcu"),k(f,"class","svelte-1tljlcu"),k(i,"class","svelte-1tljlcu"),k(s,"class","svelte-1tljlcu")},m(n,P){D(n,l,P),c(l,e),c(l,a),D(n,h,P),D(n,f,P),c(f,v),c(f,b),D(n,j,P),D(n,i,P),c(i,d),c(i,o),D(n,t,P),D(n,s,P),c(s,m),c(s,S)},p(n,P){P&4&&r!==(r=n[2].details.role+"")&&H(a,r),P&4&&_!==(_=n[2].details.from_location+"")&&H(b,_),P&4&&y!==(y=n[2].details.hobbies+"")&&H(o,y),P&4&&F!==(F=n[2].details.story+"")&&H(S,F)},d(n){n&&(u(l),u(h),u(f),u(j),u(i),u(t),u(s))}}}function ce(p){let l,e="Player details",r,a,h="click a player card to learn more about them",f,v,_=[],b=new Map,j,i,d=Y(p[0]);const y=t=>t[8].player_number;for(let t=0;t<d.length;t+=1){let s=Z(p,d,t),m=y(s);b.set(m,_[t]=$(m,s))}let o=p[1]&&x(p);return{c(){l=E("h1"),l.textContent=e,r=U(),a=E("p"),a.textContent=h,f=U(),v=E("grid");for(let t=0;t<_.length;t+=1)_[t].c();j=U(),o&&o.c(),i=X(),this.h()},l(t){l=C(t,"H1",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-sn5cv7"&&(l.textContent=e),r=q(t),a=C(t,"P",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-1m533r5"&&(a.textContent=h),f=q(t),v=C(t,"GRID",{class:!0});var s=M(v);for(let m=0;m<_.length;m+=1)_[m].l(s);s.forEach(u),j=q(t),o&&o.l(t),i=X(),this.h()},h(){k(l,"class","svelte-1tljlcu"),k(a,"class","svelte-1tljlcu"),k(v,"class","svelte-1tljlcu")},m(t,s){D(t,l,s),D(t,r,s),D(t,a,s),D(t,f,s),D(t,v,s);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(v,null);D(t,j,s),o&&o.m(t,s),D(t,i,s)},p(t,[s]){s&49&&(d=Y(t[0]),_=ie(_,s,y,1,t,d,b,v,ne,$,null,Z)),t[1]?o?o.p(t,s):(o=x(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i:Q,o:Q,d(t){t&&(u(l),u(r),u(a),u(f),u(v),u(j),u(i));for(let s=0;s<_.length;s+=1)_[s].d();o&&o.d(t)}}}function ue(p,l,e){let r=[],a=!1,h=null,f="";se(async()=>{const{data:i,error:d}=await z.from("main").select("id, name");if(d){console.error(d);return}const{data:y,error:o}=await z.from("rstr").select("player_number, name, full_name");if(o){console.error(o);return}e(0,r=i),e(0,r=y)});async function v(i){e(2,h=i);const{data:d,error:y}=await z.from("details").select("role, from_location, hobbies, story").eq("name",i.name);if(y){console.error(y);return}d.length>0&&e(2,h.details=d[0],h),await _(),e(1,a=!0)}async function _(){console.log("Fetching image for player:",h.name);const d=`https://janbwnvcsnjlwlxweqwp.supabase.co/storage/v1/object/public/profile_Pics/${`${h.name}.jpg`}`;console.log("Constructed image URL:",d),e(3,f=d),console.log("Selected player image:",f)}return[r,a,h,f,v,_,i=>v(i),()=>e(1,a=!1)]}class he extends re{constructor(l){super(),oe(this,l,ue,ce,te,{})}}export{he as component};
